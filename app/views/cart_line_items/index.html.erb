<h2>Cart</h2>


<table border="1">
	<thead>
		<tr>
			<th>Sl No</th>
			<th>Name</th>
			<th>Price</th>
			<th>Quantity</th>
			<th>Total</th>
			<th>Action</th>
			<th>Wishlist</th>
		</tr>
	</thead>
<%sum=0%>
	<tbody>
		<%@cart_line_items.each_with_index do |line_item,index| %>

		<tr>
			<td><%= index+1%></td>
			<td><%= line_item.product.name%></td>
			<td><%= line_item.product.price%></td>
			
			<td>
			<%= form_for line_item do |f|%>
			<%= f.select :quantity,(1..10).to_a%>
			<%=f.submit "update"%>
			<%end%>
			</td>
			
			<td>
			<%= line_item.product.price * line_item.quantity%>
				
			</td>
			<%sum += line_item.product.price * line_item.quantity%>
			<td>
			<%=link_to "Remove",cart_line_item_path(line_item.id), method: :delete, data:{confirm:"Are you sure?"}%>
				
			</td>
			<td>
			<%= form_for @wishlist do |f|%>
			<%=f.hidden_field :product_id, value:line_item.product.id%>
			<%=f.submit "Add"%>
			<%end%>
			</td>
		</tr>
		<%end%>

	</tbody>

</table>
<h4>Cart Total : <%=sum.round(2)%></h4>




<%= form_for @order do |f|%>
	Select address:

	<%=f.collection_select :address_id, current_user.addresses, :id, :street_address, prompt:"select address"%> or <%=link_to "add new address",new_address_path%> <br>


	<%=f.submit "checkout"%> 

<%end%>

